/*! jquery asDropdown - v0.1.1 - 2014-08-18
* https://github.com/amazingSurge/jquery-asDropdown
* Copyright (c) 2014 amazingSurge; Licensed MIT */
!function(a){var b=a.dropdown=function(c,d){this.element=c,this.$element=a(c),this.$parent=this.$element.parent(),this.name=this.$element.attr("name")?this.$element.attr("name"):d.name;var e=[];a.each(this.$element.data(),function(a,b){var c=new RegExp("^asDropdown","i");c.test(a)&&(e[a.toLowerCase().replace(c,"")]=b)}),this.options=a.extend(!0,{},b.defaults,d,e),this.namespace=this.options.namespace,this.classes={skin:this.namespace+"_"+this.options.skin,show:this.namespace+"_show",trigger:this.namespace+"-trigger",mask:this.namespace+"-mask",wrapper:this.namespace+"-wrapper",panel:this.namespace+"-panel",disabled:this.namespace+"_disabled"},null!==this.options.skin&&this.$element.addClass(this.classes.skin),this.$children=this.$element.children(),this.$panel=this._parse(this.options.panel),this.isShow=!1,this.disabled=!1,this.initialized=!1,this._trigger("init"),this.init()};b.prototype={constructor:b,init:function(){var b=this;this.$parent.addClass(this.classes.wrapper),this.$element.addClass(this.namespace).addClass(this.classes.trigger),this.$panel.addClass(this.classes.panel),this.$element.on("click.asDropdown",function(){return b.toggle.call(b),!1}),this.$panel.on("click.asDropdown","li",function(){return b.set(a(this).data(b.options.data)),b.hide(),!1}),null!==this.options.select&&this.set(this.options.select),this._trigger("ready"),this.initialized=!0},_trigger:function(a){var b,c=arguments.length>1?Array.prototype.slice.call(arguments,1):void 0;c?(b=c,b.push(this)):b=this,this.$element.trigger("asDropdown::"+a,b),this.$element.trigger(a+".asDropdown",b),a=a.replace(/\b\w+\b/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)});var d="on"+a;"function"==typeof this.options[d]&&this.options[d].apply(this,c)},show:function(){var b=this;this.disabled||(this.options.clickoutHide&&this._generateMask(),a(window).on("resize.asDropdown",function(){return b._position(),!1}),this.isShow=!0,this.$element.addClass(this.classes.show),this.$panel.addClass(this.classes.show),this._position(),this._trigger("show"))},hide:function(){this.isShow=!1,this.options.clickoutHide&&this._clearMask(),this.$element.removeClass(this.classes.show),this.$panel.removeClass(this.classes.show),a(document).off("mousedown.asDropdown"),this._trigger("hide")},set:function(b){if(this.options.imitateSelect){var c=null,d=this;if(d.$panel.children().each(function(){a(this).data(d.options.data)===b&&(c=a(this),d.value=b)}),!c)return;this.$element.text(c.text()),this.$children.length&&this.$children.appendTo(this.$element)}this.initialized&&this._trigger("change",b,this.name,"asDropdown")},_generateMask:function(){var b=this;this.$mask=a("<div></div>").addClass(this.classes.mask).appendTo(this.$parent),this.$mask.on("click.asDropdown",function(){return b.hide(),!1})},_clearMask:function(){this.$mask&&(this.$mask.off(".asDropdown"),this.$mask.remove(),this.$mask=null)},toggle:function(){this.isShow?this.hide():this.show()},_position:function(){var b,c,d=this.$element.offset(),e=this.$element.outerHeight(),f=this.$element.outerWidth(),g=this.$panel.outerWidth(!0),h=this.$panel.outerHeight(!0);b=h+e+d.top>a(window).height()+a(window).scrollTop()?-h:e,c=g+d.left>a(window).width()+a(window).scrollLeft()?f-g:0,this.$panel.css({position:"absolute",top:b,left:c})},_parse:function(b){return b.indexOf("+")>=0?this.$element.next():a(this.options.panel)},get:function(){return this.value},enable:function(){this.disabled=!1,this.$wrapper.removeClass(this.classes.disabled)},disable:function(){this.disabled=!0,this.$wrapper.addClass(this.classes.disabled)},destory:function(){this.hide(),this.$element.off(".asDropdown"),this.$element.remove(),a(window).off(".asDropdown")}},b.defaults={namespace:"asDropdown",skin:null,panel:"+",clickoutHide:!0,imitateSelect:!1,select:null,data:"value",name:null,onInit:null,onShow:null,onHide:null,onChange:null},a.fn.asDropdown=function(c){if("string"==typeof c){var d=c,e=arguments.length>1?Array.prototype.slice.call(arguments,1):void 0;return this.each(function(){var b=a.data(this,"asDropdown");"function"==typeof b[d]&&b[d].apply(b,e)})}return this.each(function(){a.data(this,"asDropdown")||a.data(this,"asDropdown",new b(this,c))})}}(jQuery);